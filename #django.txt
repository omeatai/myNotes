##############################################################################

#Database Engines
django.db.backends.postgresql
django.db.backends.mysql
django.db.backends.sqlite3
django.db.backends.oracle

#Example configuration in settings.py
DATABASES = {
  'default': {
     'ENGINE': 'django.db.backends.mysql',
     'NAME': 'databasename',
     'USER': 'username',
     'PASSWORD': 'password',
     'HOST': '127.0.0.1',
     'PORT': '5432',
}

#Model Fields
BooleanField
CharField
DateField
DateTimeField
DecimalField
EmailField
FileField
FloatField
ImageField
IntegerField
TextField

#Relationship Fields
ForeignKey
ManyToManyField

###########################

#Example Model
from django.db import models
from django.utils import timezone

class Make (models.Model):
  name = models.CharField (max_length=15)
  factory_address = models. TextField()
  email = models. EmailField()
  def _str_(self):
     return self.name

class Car(models.Model):
  name = models.CharField (max_length=20)
  active = BooleanField()
  date_added = DateTimeField (default=timezone.now)
  price = FloatField()
  make = models.ForeignKey (Make)
  def _str_(self):
     return self.name

###########################

#Create Objects
from .models import Make, Car
toyota = Make (name='Toyota', factory_address='Somewhere in Japan...',
      email='toyota@toyota.com')
toyota.save()
camry = Car(name='Camry', active=True, price=29999.99, make=toyota)
camry.save()

#Example Queries
Car.objects.get(pk=1) #get car with primary key = 1
Make.objects.all()
Car.objects.filter(name='Camry')
Make.objects.all() [5:10] #offset 5, limit 10
Car.objects.order_by('-name')
Make.objects.filter(name_startswith='Toy')
Car.objects.filter(make_name='Toyota') #relationship query

#Useful Links
Django Website - https://www.djangoproject.com
Pretty Printed Website - http://prettyprinted.com
Pretty Pretty YouTube Channel -
https://www.youtube.com/c/prettyprintedtutorials

###########################

# Automatic primary key fields
By default, Django gives each model an auto-incrementing primary key with the type specified per app in AppConfig.default_auto_field or globally in the DEFAULT_AUTO_FIELD setting. 
For example:

id = models.BigAutoField(primary_key=True)

###########################

# capture requirements to install
pip freeze > requirements.txt

# install requirements from requirements.txt
pip install -r requirements.txt

# Now to remove one by one
pip uninstall -r requirements.txt

# If we want to remove all at once then
pip uninstall -r requirements.txt -y

pip freeze or pip list

$ python manage.py makemigrations

$ python manage.py migrate

$ python manage.py sqlmigrate weblog 0001

$ python manage.py shell

$ pip install django django-shortcuts

pip install django-shortcuts

#PIPENV
pip install pipenv
pipenv --python 3.10.3

pipenv shell
source $(pipenv --venv)/bin/activate

exit

#View location of the virtualenv:
pipenv --venv

pipenv --rm
rm -rf /Users/ifeanyiomeata/.local/share/virtualenvs/docker_drf-yNZHhWWe

###########################

{% if user.is_authenticated %}{% endif %}

#python decouple module

from django.shortcuts import render
from hotel.models import User, Receptionist, Room, RoomStatus, RoomType, Booking, Payment, PaymentType, Reservation

from django.db import models
from django.contrib.auth.models import AbstractUser

class User(AbstractUser):
    username = models.CharField(max_length=64, unique=True)
    email = models.EmailField(max_length=64, unique=True)
    phone_number = models.CharField(max_length=64, unique=True)
    password = models.CharField(max_length=64)
    otp_code = models.CharField(max_length=64, default=None, unique=True, null=True)
    email_verified = models.BooleanField(default=False)
    is_admin = models.BooleanField(default=False)
    is_superadmin = models.BooleanField(default=False)
    created_at = models.DateTimeField(auto_now_add=True, null=True)
    updated_at = models.DateTimeField(auto_now=True, null=True)

    def __str__(self):
        return f'User: {self.username.title()}'

from blog.models import Post
from django.contrib.auth.models import User

AUTH_USER_MODEL = 'hotel.user'

INSTALLED_APPS = [
    'hotel.apps.HotelConfig',
    'aa.apps.AaConfig',
    'booking.apps.BookingConfig',
    'payment.apps.PaymentConfig',
    'logs.apps.LogsConfig',
]

###########################
# rest > models.py:

from django.db import models
from django.contrib.auth.models import AbstractUser


class User(AbstractUser):
    username = models.CharField(max_length=200, unique=True, null=False)
    firstname = models.CharField(max_length=200, null=False)
    lastname = models.CharField(max_length=200, null=False)
    gender = models.CharField(max_length=10, null=False)
    age = models.IntegerField(default=0, null=False)
    password = models.CharField(max_length=200, null=False)

    def __str__(self):
        return f'{self.firstname} {self.lastname}'

###########################

AUTH_USER_MODEL = 'drf.user'

from django.contrib import admin
from .models import User

admin.site.register(User)

#djangorestframework 3.13.1
pip install djangorestframework

###########################
# SERIALIZERS:
# rest > serializers.py:

from rest_framework import serializers
from .models import User

class UserSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = User
        fields = ('id', 'firstname', 'lastname', 'gender', 'age', 'password')
        
class UserSerializer(serializers.ModelSerializer):

###########################
# rest > views.py:

from django.shortcuts import render
from rest_framework import viewsets
from .models import User
from .serializers import UserSerializer


class UserView(viewsets.ModelViewSet):
    queryset = User.objects.all()
    serializer_class = UserSerializer


###########################
# rest > urls.py:

from django.urls import include, path
from . import views
from rest_framework import routers

router = routers.DefaultRouter()
router.register('rest', views.UserView)

urlpatterns = [
    path('', include(router.urls))
]


###########################

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest.apps.RestConfig',
    'rest_framework',
]

###########################

Shortcuts
# Django
'c'  : 'collectstatic',
'r'  : 'runserver',
'sd' : 'syncdb',
'sp' : 'startproject',
'sa' : 'startapp',
't'  : 'test',

# Shell
'd'  : 'dbshell',
's'  : 'shell',

# Auth
'csu': 'createsuperuser',
'cpw': 'changepassword',

# South
'm'  : 'migrate',
'mm' : 'makemigrations',
'sm' : 'schemamigration',
'dm' : 'datamigration',

# Haystack
'ix' : 'update_index',
'rix': 'rebuild_index',

# Django Extensions
'sk' : 'generate_secret_key',
'rdb': 'reset_db',
'rp' : 'runserver_plus',
'shp': 'shell_plus',
'url': 'show_urls',
'gm' : 'graph_models',
'rs' : 'runscript'

######################################################
######################################################
Django Introduction for Beginners
######################################################
######################################################

from django.contrib import admin
from .models import User

admin.site.register(User)

###########################

from django.shortcuts import render
from .models import Comment

def home(request):
    comments = Comment.objects.order_by('-date_added')
    return render(request, 'bookclub/home.html', {
        "comments" : comments,
    })

###########################

<div class="col-md-3">
    <div class="h-100 p-5 text-white bg-dark rounded-3">
    <h2>{{comment.name}}</h2>
    <p>Comment on:<br> {{comment.date_added | date:"F d, Y"}}.</p>
    </div>
</div>

###########################

forms.py:

from django import forms

class CommentForm(forms.Form):
    name = forms.CharField(max_length=200, 
        widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'Name'}))
    title = forms.CharField(max_length=200, 
        widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'Title'}))
    comment = forms.CharField(widget=forms.Textarea(attrs={'class': 'form-control'}))

###########################

views.py:

def comment(request):
    form = CommentForm()
    return render(request, 'bookclub/comment.html', {
        "form" : form,
    })

###########################

urls.py:

from django.urls import path
from . import views

urlpatterns = [
    path('', views.home, name='home'),
    path('comment/', views.comment, name='comment'),
    path('register/', views.register, name='register'),
    path('login/', views.login, name='login'),
    path('logout/', views.logout, name='logout'),
]

###########################
views.py:

from django.shortcuts import render, redirect
from .models import Comment
from .forms import CommentForm

def home(request):
    comments = Comment.objects.order_by('-date_added')
    return render(request, 'bookclub/home.html', {
        "comments" : comments,
    })

def comment(request):
    if request.method == 'POST':
        form = CommentForm(request.POST)
        data = request.POST
        
        if form.is_valid():
            instance = Comment(name=data['name'],title=data['title'],comment=data['comment'])
            instance.save()
            return redirect('home')
    else:
        form = CommentForm()
        return render(request, 'bookclub/comment.html', {
            "form" : form,
        })

###########################
home.html:

{% block comment %}
{% for comment in comments %}
<div class="row align-items-md-stretch">
    <div class="col-md-3">
        <div class="h-100 p-5 text-white bg-dark rounded-3">
        <h2>{{comment.name}}</h2>
        <p>Comment on:<br> {{comment.date_added | date:"F d, Y"}}.</p>
        </div>
    </div>
    <div class="col-md-9">
        <div class="h-100 p-5 bg-light border rounded-3">
        <h2>{{comment.title}}</h2>
        <p>{{comment.comment}}</p>
        </div>
    </div>
</div>
<div class="row align-items-md-stretch">
    <div class="col-md-12">
        &nbsp;
    </div>    
</div> 
{% endfor %}   
{% endblock comment %}

###########################
comment.py:

{% extends 'bookclub/base.html' %}

{% block title %}BookClub.io - Comment{% endblock title %}

{% block content %}
<h1>Leave a Comment:</h1>
<form method="POST" action="{% url 'comment' %}">
    {% csrf_token %}
    <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        {% comment %} <input type="text" class="form-control" id="name"> {% endcomment %}
        {{ form.name }}
    </div>
    <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        {{ form.title }}
    </div>
    <div class="mb-3">
        <label for="comment" class="form-label">Comment</label>
        {{ form.comment }}
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
<h1>&nbsp;</h1>
{% endblock content %}

###########################
forms.py:

from django import forms

class CommentForm(forms.Form):
    name = forms.CharField(max_length=200,
        widget=forms.TextInput(attrs={'class': 'form-control','placeholder': 'Full Name...', 'style': 'max-width: 600px', 'id': 'name'}))
    title = forms.CharField(max_length=200, 
        widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': 'Title...', 'style': 'max-width: 600px', 'id': 'title'}))
    comment = forms.CharField(widget=forms.Textarea(attrs={'class': 'form-control', 'placeholder': 'Write your comments here...', 'id': 'comment', 'style': 'max-width: 600px'}))

###########################
models.py:

from django.db import models
from django.utils import timezone

class Comment(models.Model):
    name = models.CharField(max_length=200, default=None)
    title = models.CharField(max_length=200, default=None)
    comment = models.TextField(default=None)
    date_added = models.DateTimeField(default=timezone.now)
    
    def __str__(self):
        return f'<Name: {self.name}, ID: {self.id}>'


######################################################
######################################################
Django Authentication Basics
######################################################
######################################################

python manage.py migrate admin zero
python manage.py migrate auth zero
python manage.py migrate contenttypes zero
python manage.py migrate sessions zero

#Run migrations for your relative app
python manage.py makemigrations users

#Migrate the tables to database
python manage.py migrate


###########################

pip install djangorestframework-simplejwt

settings.py:

REST_FRAMEWORK = {
    'NON_FIELD_ERRORS_KEY': 'error',
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    )
}

###########################

.gitignore

python manage.py test

pip install coverage

coverage run manage.py test && coverage report && coverage html

.coveragerc:
[run]
source=authentication/,todos/,
omit=
    venv
    */migrations/*
    */tests/*
    */__init__.py

###########################

Upgrade requirements.txt file

pip install pip-upgrader

pip-upgrade requirements.txt

pip freeze > requirements.txt

pip3 install -r requirements.txt

pip3 install -U -r requirements.txt

# capture requirements to install
pip freeze > requirements.txt

# install requirements from requirements.txt
pip install -r requirements.txt

# Now to remove one by one
pip uninstall -r requirements.txt

# If we want to remove all at once then
pip uninstall -r requirements.txt -y

pip freeze or pip list

$ python manage.py makemigrations

$ python manage.py migrate

$ python manage.py sqlmigrate weblog 0001

$ python manage.py shell

$ pip install django django-shortcuts

pip install django-shortcuts

#PIPENV
pip install pipenv
pipenv --python 3.10.3

pipenv shell
source $(pipenv --venv)/bin/activate

exit

#View location of the virtualenv:
pipenv --venv

pipenv --rm
rm -rf /Users/ifeanyiomeata/.local/share/virtualenvs/docker_drf-yNZHhWWe



curl http://127.0.0.1:8000/api/

###########################

books > view.py:

from django.shortcuts import render
from django.views.generic import ListView
from books.models import Book


class BookListView(ListView):
    model = Book
    template_name = 'book_list.html'

###########################

api > view.py:

from django.shortcuts import render
from rest_framework import generics
from books.models import Book
from api.serializers import BookSerializer

class BookAPIView(generics.ListAPIView): 
    queryset = Book.objects.all() 
    serializer_class = BookSerializer

###########################

books > model.py:

from django.db import models


class Book(models.Model):
    title = models.CharField(max_length=250)
    subtitle = models.CharField(max_length=250)
    author = models.CharField(max_length=100)
    isbn = models.CharField(max_length=13)
    
    def __str__(self):
        return self.title

###########################

books > urls:

from django.urls import include, path
from books.views import BookListView

urlpatterns = [
    path('', BookListView.as_view(), name='home')
]

###########################

api > urls:

from django.urls import path
from api.views import BookAPIView

urlpatterns = [
    path('', BookAPIView.as_view()),
]

###########################

api > serializers.py:

from rest_framework import serializers
from books.models import Book


class BookSerializer(serializers.ModelSerializer): 
    
    class Meta:
        model = Book
        fields = ('title', 'subtitle', 'author', 'isbn')


###########################


REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.AllowAny',
    ]
}

###########################

Cross-Origin Resource Sharing (CORS).

django-cors-headers

pipenv install django-cors-headers==3.1.1

pip install django-cors-headers

• add corsheaders to the INSTALLED_APPS
• addCorsMiddlewareaboveCommonMiddleWareinMIDDLEWARE 
• create a CORS_ORIGIN_WHITELIST

INSTALLED_APPS = [
    'corsheaders', # new
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware', # new
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

CORS_ORIGIN_WHITELIST = (
    'http://localhost:3000',
    'http://localhost:8000',
)

###########################

brew install node
pip install nodejs

$ npx create-react-app frontend
$ cd frontend
$ npm start
























































































































































###########################################################################################################################################################################